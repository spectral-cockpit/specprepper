<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Combinatory Savitzky-Golay Filtering — sg_apply • specprepper</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Combinatory Savitzky-Golay Filtering — sg_apply"><meta property="og:description" content="Apply Savitzky-Golay filtering at variable combinations of
parameter sets for set(s) of spectra."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">specprepper</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.3.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Combinatory Savitzky-Golay Filtering</h1>
    
    <div class="hidden name"><code>sg_apply.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Apply Savitzky-Golay filtering at variable combinations of
parameter sets for set(s) of spectra.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">sg_apply</span><span class="op">(</span></span>
<span>  <span class="va">X</span>,</span>
<span>  <span class="va">dt_sg_plan</span>,</span>
<span>  dt_prep_sets <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  nest_params <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  append_rows <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>X</dt>
<dd><p><code>matrix</code>, <code>data.frame</code> or <code>data.table</code> with spectra to be
preprocessed according to plan (see <code>dt_sg_plan</code>).</p></dd>


<dt>dt_sg_plan</dt>
<dd><p>A standardized <code>data.table</code> with the Savitzky-Golay
parameter sets, which can be generated with <code>sg_plan()</code>. It must at least
contain the following columns:</p><ul><li><p><code>prep_set</code> (character)</p></li>
<li><p><code>prep_label</code> (character)</p></li>
<li><p><code>m</code> (integer): order of the derivative; <code>m = 0</code> signifies no derivative</p></li>
<li><p><code>p</code> (integer): polynomal order</p></li>
<li><p><code>w</code> (integer): window size in number of spectral points; must be uneven
<code>m</code> is the , <code>p</code> is the polynomial order
that should be bigger than the derivative order,  and <code>w</code> is the window size
in  number of spectral points (must be uneven). See section
<em>Savitzky-Golay Plan</em> for templating the required object and
<code><a href="https://rdrr.io/pkg/prospectr/man/savitzkyGolay.html" class="external-link">prospectr::savitzkyGolay()</a></code> for further the original Savitzky-Golay
algorithm.</p></li>
</ul></dd>


<dt>dt_prep_sets</dt>
<dd><p>A standardized <code>data.table</code>, i.e. returned from <code>specprepper::*_apply()</code>
function. Contains labelled sets of preprocessed spectra:
This argument allows to chain preprocessing in sequential manner, and i.e. apply variable
Savitzky-Golay smoothers with a single function application.</p></dd>


<dt>nest_params</dt>
<dd><p>logical whether to nest the Savitzky-Golay parameters in
a <code>prep_params</code> list-column.</p></dd>


<dt>append_rows</dt>
<dd><p>logical whether to append the newly processed rows, when
<code>dt_prep_sets</code> is not NULL.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>data.table with the following (list)columns:by
#to be filled</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    
<div class="section">
<h3 id="design-principles">Design principles<a class="anchor" aria-label="anchor" href="#design-principles"></a></h3>


<p>Savitzky-Golay transformation (moving window polynomial least-squares) prior modeling can help
to reduce noise and enhance signals in spectra. This can allowing models to extract parsimonious
predictable information from spectra for more accurate estimation. However, this process requires
empirical optimization and fine-tuning of the parameters that control the nature and degree of
smoothing and hence noise removal for calibration task at hand, which is often not done. For
example, systematically varying the size of the smoothing window control the amount of
information filtered and potential artefacts created. Nonetheless, non-stationary noise as
opposed to white gaussian noise and informative fluctuations in chemically-driven spectral
dynamics (e.g. slope changes and different absorption peak widths and compositional complexity)
can make a simple nonrecursive application of the original Savitzky-Golay algorithm less
appropriate to filter noise.</p>
<p>Templating code for sequential and/or recursive branching of preprocessing methods with variation
their parameters, if applicable, can be repetitive and cumbersome. This is where the specprep
package with combinatory planning and application tools jumps in.</p>
<p>The combinatory power of the <code>sg_apply()</code> function stems from the ability to map Savitzly Golay
both over row-wise sets of parametrizations (see subsection <em>Savitzky-Golay Plan</em>) and previous
preprocessing rounds that yielded set(s) of (differently) processed spectra to be processed again
(see section <em>Set(s) of Previously Processed Spectra</em>). Since <code>data.table</code>s are structured
consistently across the <code>specprep::*_apply</code> type of functions, their inputs and outputs are
interoperable. This allows flexiblity for applying combinations of preprocessing methods.</p>
</div>

<div class="section">
<h3 id="savitzky-golay-plan">Savitzky-Golay Plan<a class="anchor" aria-label="anchor" href="#savitzky-golay-plan"></a></h3>


<p><code>dt_sg_plan</code> is most conventiently built with <code>sg_plan()</code>. It parametrizes Savitzky-Golay
preprocessing scheduled on either <code>X</code> or on all sets of already processed spectra contained in
<code>dt_prep_sets</code>. Each row lays out one preprocessing step, linking the following data across
columns:</p><ul><li><p><code>prep_set</code>: this string identifies the name of general preprocessing method that is chained
to sets of spectra.</p></li>
</ul></div>

<div class="section">
<h3 id="set-s-of-previously-processed-spectra">Set(s) of Previously Processed Spectra<a class="anchor" aria-label="anchor" href="#set-s-of-previously-processed-spectra"></a></h3>


<p>tbd</p>
</div>

    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Philipp Baumann</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Philipp Baumann.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

